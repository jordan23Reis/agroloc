<div [ngClass]="isMobile === true ? 'mobForm' : 'webForm'">
  <mat-tab-group>
    <mat-tab label="Inicio">
      <div class="inicio">
        <img
          [src]="
            (userDate | async)?.CadastroComum?.Foto?.Url
              ? (userDate | async)?.CadastroComum?.Foto?.Url
              : 'assets/default-account-icon.png'
          "
        />
        <h2>
          Ola,
          {{
            (userDate | async)?.CadastroComum?.Nome +
              ' ' +
              (userDate | async)?.CadastroComum?.Sobrenome | uppercase
          }}
        </h2>
        <h3>Seja Bem-Vindo!</h3>
        <p>
          Aprimore a gestão de suas informações, privacidade e segurança, de
          modo a atender de forma eficaz às suas necessidades.
        </p>
      </div>
    </mat-tab>
    <mat-tab label="Informações Pessoais">
      <div class="informacoes">
        <div class="titulo">
          <h2>Informações sobre você e suas Preferências</h2>
          <div class="painel">
            <mat-accordion>
              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>person</mat-icon>
                  </mat-panel-title>
                  <h3>Informações Basicas</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>
                <span class="example-spacer"></span>

                <form class="conteudo" [formGroup]="infoPessoais">
                  <p>Informações de identidade visíveis para outras pessoas</p>

                  <div class="containerFoto">
                    <h4>Foto do Perfil</h4>
                    <span class="example-spacer"></span>
                    <p>
                      Uma foto ajuda as pessoas a reconhecerem <br />
                      você e permite que você saiba quando <br />
                      a conta está conectada
                    </p>
                    <span class="example-spacer"></span>
                    <img
                      style="cursor: pointer"
                      [src]="
                        imagePreview
                          ? imagePreview
                          : (userDate | async)?.CadastroComum?.Foto?.Url
                          ? (userDate | async)?.CadastroComum?.Foto?.Url
                          : 'assets/default-account-icon.png'
                      "
                      (click)="selectImage()"
                    />
                    <input
                      type="file"
                      accept="image/jpeg,image/png"
                      id="fileInput"
                      style="display: none"
                      (change)="handleImageSelection($event)"
                    />
                  </div>

                  <div class="formContainer">
                    <p>Nome</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="(userDate | async)?.CadastroComum?.Nome"
                        formControlName="Nome"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditName()"
                      >
                        <mat-icon>{{
                          disableNome ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>Sobrenome</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="(userDate | async)?.CadastroComum?.Sobrenome"
                        formControlName="Sobrenome"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditSobrenome()"
                      >
                        <mat-icon>{{
                          disableSobrenome ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>Data de Nascimento</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [matDatepicker]="dp3"
                        (dateInput)="swtichStateEditNascimento()"
                        [value]="
                          (userDate | async)?.CadastroComum?.DataDeNascimento
                        "
                        formControlName="Nascimento"
                      />
                      <mat-datepicker-toggle
                        matIconSuffix
                        [for]="dp3"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>Gênero</p>
                    <mat-form-field class="form">
                      <input
                        *ngIf="disableGenero"
                        disabled
                        type="text"
                        matInput
                        (dateInput)="swtichStateEditNascimento()"
                        [value]="(userDate | async)?.CadastroComum?.Sexo"
                      />
                      <mat-select *ngIf="!disableGenero" formControlName="Sexo">
                        <mat-option value="Masculino">Masculino</mat-option>
                        <mat-option value="Feminino">Feminino</mat-option>
                        <mat-option value="Outro">Outro</mat-option>
                      </mat-select>
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditSexo()"
                      >
                        <mat-icon>{{
                          disableGenero ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>CPF</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="
                          (userDate | async)?.CadastroComum?.Cpf === undefined
                            ? 'Sem CPF'
                            : (userDate | async)?.CadastroComum?.Cpf
                        "
                        formControlName="Cpf"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditCpf()"
                      >
                        <mat-icon>{{ disableCpf ? 'edit' : 'close' }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>CNPJ</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="
                          (userDate | async)?.CadastroComum?.Cnpj === undefined
                            ? 'Sem CNPJ'
                            : (userDate | async)?.CadastroComum?.Cnpj
                        "
                        formControlName="Cnpj"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditCnpj()"
                      >
                        <mat-icon>{{
                          disableCnpj ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="menuButtons">
                    <span class="example-spacer"></span>
                    <button
                      class="nextButton"
                      mat-raised-button
                      color="primary"
                      (click)="setInfoPessoais()"
                      [disabled]="
                        AllDisableInfoPessoais || (loadingRequest | async)
                      "
                    >
                      Aplicar
                    </button>
                  </div>
                </form>

                <span class="example-spacer"></span>
                <mat-progress-bar
                  *ngIf="loadingRequest | async"
                  mode="indeterminate"
                ></mat-progress-bar>
              </mat-expansion-panel>
              <mat-divider></mat-divider>

              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>phone</mat-icon>
                  </mat-panel-title>

                  <h3>Informações de Contato</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>
                <span class="example-spacer"></span>

                <form class="conteudo" [formGroup]="infoContato">
                  <p>Informações de contato importantes para Validações</p>

                  <div class="formContainer">
                    <p>
                      Trocar seu endereço de email permite receber informações
                      importantes e manter sua conta segura.
                    </p>
                    <p>Email</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="(userDate | async)?.Login?.Email"
                        formControlName="Email"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditEmail()"
                      >
                        <mat-icon>{{
                          disableEmail ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>
                      Adicione seus números de telefone à sua conta para manter
                      seus contatos atualizados.
                    </p>
                    <p>Adicione Telefones</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="
                          (userDate | async)?.CadastroComum?.Telefone?.[0] !==
                          undefined || null || ''
                            ? (userDate | async)?.CadastroComum?.Telefone?.[0]
                            : 'Sem Telefone 1'
                        "
                        formControlName="TelefoneOne"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditTelefoneOne()"
                      >
                        <mat-icon>{{
                          disableTelefoneOne ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>

                    <p>Outros Telefones</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [value]="
                          (userDate | async)?.CadastroComum?.Telefone?.[1] ===
                          undefined
                            ? 'Sem Telefone 2'
                            : (userDate | async)?.CadastroComum?.Telefone?.[1]
                        "
                        formControlName="TelefoneTwo"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="swtichStateEditTelefoneTwo()"
                      >
                        <mat-icon>{{
                          disableTelefoneTwo ? 'edit' : 'close'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                    <div class="alert">
                      <mat-icon>report_problem</mat-icon>

                      <p style="text-align: justify">
                        Certifique-se de escolher um email válido e acessível,
                        pois ele é essencial para redefinir senhas e receber
                        atualizações da conta.
                      </p>
                    </div>
                  </div>

                  <div class="menuButtons">
                    <span class="example-spacer"></span>
                    <button
                      class="nextButton"
                      mat-raised-button
                      color="primary"
                      (click)="setInfoContatos()"
                      [disabled]="
                        AllDisableInfoContatos || (loadingRequest | async)
                      "
                    >
                      Aplicar
                    </button>
                  </div>
                </form>

                <span class="example-spacer"></span>
                <mat-progress-bar
                  *ngIf="loadingRequest | async"
                  mode="indeterminate"
                ></mat-progress-bar>
              </mat-expansion-panel>
              <mat-divider></mat-divider>

              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>local_shipping</mat-icon>
                  </mat-panel-title>

                  <h3>Informações de Freteiro</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>
                <p>Formas de pagamento e transações feitas na conta.</p>
              </mat-expansion-panel>
              <mat-divider></mat-divider>

              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>password</mat-icon>
                  </mat-panel-title>

                  <h3>Alterar Senha</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>

                <span class="example-spacer"></span>

                <form class="conteudo" [formGroup]="infoSenha">
                  <div class="formContainer">
                    <p
                      style="
                        align-self: center;
                        text-align: center;
                        max-width: 50%;
                      "
                    >
                      Para garantir a segurança da sua conta, você pode
                      facilmente atualizar sua senha. O processo é simples e
                      envolve os seguintes passos
                    </p>

                    <p>
                      <strong>1.</strong> Comece informando sua senha atual para
                      confirmar sua identidade.
                    </p>
                    <p>Senha</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [type]="disableSenha ? 'password' : 'text'"
                        formControlName="Senha"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="disableSenha = !disableSenha"
                      >
                        <mat-icon>{{
                          disableSenha ? 'visibility' : 'visibility_off'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>
                      <strong>2.</strong> Escolha uma nova senha que seja forte
                      e única. Recomendamos o uso de uma combinação de letras
                      maiúsculas, letras minúsculas, números e símbolos.
                    </p>
                    <p>Nova Senha</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [type]="disableNovaSenha ? 'password' : 'text'"
                        formControlName="NovaSenha"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="disableNovaSenha = !disableNovaSenha"
                      >
                        <mat-icon>{{
                          disableNovaSenha ? 'visibility' : 'visibility_off'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="formContainer">
                    <p>
                      <strong>3.</strong> Digite a nova senha novamente para
                      garantir que você não cometeu erros de digitação e que ela
                      corresponda à senha escolhida anteriormente.
                    </p>
                    <p>Confirmar Nova Senha</p>
                    <mat-form-field class="form">
                      <input
                        type="text"
                        matInput
                        [type]="disableConfSenha ? 'password' : 'text'"
                        formControlName="ConfSenha"
                      />
                      <button
                        mat-icon-button
                        matSuffix
                        (click)="disableConfSenha = !disableConfSenha"
                      >
                        <mat-icon>{{
                          disableConfSenha ? 'visibility' : 'visibility_off'
                        }}</mat-icon>
                      </button>
                    </mat-form-field>
                  </div>

                  <div class="menuButtons">
                    <span class="example-spacer"></span>
                    <button
                      class="nextButton"
                      mat-raised-button
                      color="primary"
                      (click)="setInfoSenha()"
                      [disabled]="loadingRequest | async"
                    >
                      Aplicar
                    </button>
                  </div>
                </form>

                <span class="example-spacer"></span>
                <mat-progress-bar
                  *ngIf="loadingRequest | async"
                  mode="indeterminate"
                ></mat-progress-bar>
              </mat-expansion-panel>
              <mat-divider></mat-divider>

              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>house</mat-icon>
                  </mat-panel-title>

                  <h3>Endereços</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>

                <span class="example-spacer"></span>

                <form class="conteudo" [formGroup]="infoEndereco">
                  <p><strong>Informações de Endereços</strong></p>

                  <div class="formContainer">
                    <div class="formEndereco">
                      <div class="titleEnd">
                        <p>Adicionar Endereço</p>
                        <span class="example-spacer"></span>
                        <button
                          *ngIf="!disableEndereco"
                          [disabled]="loadingRequest | async"
                          mat-mini-fab
                          color="primary"
                          (click)="setInfoEndereco()"
                        >
                          <mat-icon> done</mat-icon>
                        </button>
                        <button
                          mat-mini-fab
                          [color]="!disableEndereco ? 'warn' : 'primary'"
                          (click)="swtichStateEditEndereco()"
                        >
                          <mat-icon>{{
                            disableEndereco ? 'edit' : 'close'
                          }}</mat-icon>
                        </button>
                      </div>
                      <mat-progress-bar
                        *ngIf="loadingRequest | async"
                        mode="indeterminate"
                      ></mat-progress-bar>

                      <div class="logNum">
                        <mat-form-field id="log" class="form">
                          <mat-label>Logradouro</mat-label>
                          <input
                            type="text"
                            matInput
                            formControlName="Logradouro"
                          />
                        </mat-form-field>
                        <mat-form-field id="num" class="form">
                          <mat-label>Nr</mat-label>
                          <input
                            type="number"
                            matInput
                            formControlName="Numero"
                          />
                        </mat-form-field>
                      </div>

                      <div class="baiCom">
                        <mat-form-field id="bai" class="form">
                          <mat-label>Bairro</mat-label>
                          <input
                            type="text"
                            matInput
                            formControlName="Bairro"
                          />
                        </mat-form-field>
                        <mat-form-field id="com" class="form">
                          <mat-label>Complemento</mat-label>
                          <input
                            type="text"
                            matInput
                            formControlName="Complemento"
                          />
                        </mat-form-field>
                      </div>

                      <div class="cidCEstCep">
                        <mat-form-field id="cid" class="form">
                          <mat-label>Cidade</mat-label>
                          <input
                            type="text"
                            matInput
                            formControlName="Cidade"
                          />
                        </mat-form-field>
                        <mat-form-field id="est" class="form">
                          <mat-label>UF</mat-label>
                          <input
                            type="text"
                            matInput
                            formControlName="Estado"
                          />
                        </mat-form-field>
                        <mat-form-field id="cep" class="form">
                          <mat-label>CEP</mat-label>
                          <input type="text" matInput formControlName="Cep" />
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="footerList">
                      <p>Seus Endereços</p>
                      <span class="example-spacer"></span>
                      <button
                        mat-mini-fab
                        [disabled]="!ListEndereco.selectedOptions.hasValue()"
                        [color]="'warn'"
                        (click)="
                          remInfoEndereco(
                            ListEndereco.selectedOptions.selected[0].value
                          )
                        "
                      >
                        <mat-icon matPrefix>delete</mat-icon>
                      </button>
                    </div>
                    <mat-progress-bar
                      *ngIf="loadingRequest | async"
                      mode="indeterminate"
                    ></mat-progress-bar>
                    <div class="listEndereco">
                      <mat-selection-list #ListEndereco [multiple]="false">
                        <mat-list-option
                          *ngFor="
                            let item of (userDate | async)?.CadastroComum
                              ?.Enderecos
                          "
                          [value]="item._id"
                        >
                          <span matListItemTitle
                            >{{ item.Logradouro }}, {{ item.Numero }}</span
                          >
                          <span matListItemLine style="margin-left: 20px"
                            >{{ item.Cidade }}, {{ item.Estado }},
                            {{ item.Cep }}</span
                          >
                          <span
                            *ngIf="item.Bairro && item.Complemento"
                            matListItemLine
                            style="margin-left: 20px; margin-top: 3px"
                            >{{ item.Bairro }}, {{ item.Complemento }}</span
                          >
                          <span
                            *ngIf="item.Bairro && !item.Complemento"
                            matListItemLine
                            style="margin-left: 20px; margin-top: 3px"
                            >{{ item.Bairro }}</span
                          >
                          <span
                            *ngIf="!item.Bairro && item.Complemento"
                            matListItemLine
                            style="margin-left: 20px; margin-top: 3px"
                            >{{ item.Complemento }}</span
                          >
                        </mat-list-option>
                        <div class="opList"></div>
                      </mat-selection-list>
                    </div>
                  </div>
                </form>

                <span class="example-spacer"></span>
              </mat-expansion-panel>
              <mat-divider></mat-divider>
            </mat-accordion>
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Pagamentos">
      <div class="pagamentos">
        <div class="titulo">
          <h2>Informações de pagamento, Transações e Historico</h2>
          <div class="painel">
            <mat-accordion>
              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>payment</mat-icon>
                  </mat-panel-title>

                  <h3>Formas de pagamento</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>

                <span class="example-spacer"></span>

                <form class="conteudo">
                  <p><strong>Informações de Endereços</strong></p>

                  <div class="formContainer">
                    <div class="formEndereco">
                      <form class="formEndereco" [formGroup]="infoBancarias">
                        <div class="titleEnd">
                          <p>Adicionar Conta Bancária</p>
                          <span class="example-spacer"></span>
                          <button
                            *ngIf="!disableEndereco"
                            [disabled]="loadingRequest | async"
                            mat-mini-fab
                            color="primary"
                            (click)="setInfoEndereco()"
                          >
                            <mat-icon> done</mat-icon>
                          </button>
                          <button
                            mat-mini-fab
                            [color]="!disableEndereco ? 'warn' : 'primary'"
                            (click)="swtichStateEditEndereco()"
                          >
                            <mat-icon>{{
                              disableEndereco ? 'edit' : 'close'
                            }}</mat-icon>
                          </button>
                        </div>
                        <mat-progress-bar
                          *ngIf="loadingRequest | async"
                          mode="indeterminate"
                        ></mat-progress-bar>

                        <div class="ageNume">
                          <mat-form-field id="nume" class="form">
                            <mat-label>Número da Conta</mat-label>
                            <input
                              type="number"
                              matInput
                              formControlName="Conta"
                            />
                          </mat-form-field>

                          <mat-form-field id="age" class="form">
                            <mat-label>Agência</mat-label>
                            <input
                              type="text"
                              matInput
                              formControlName="Agencia"
                            />
                          </mat-form-field>
                        </div>
                      </form>

                      <form class="formEndereco" [formGroup]="infoPix">
                        <div class="titleEnd">
                          <p>Adicionar Chave Pix</p>
                          <span class="example-spacer"></span>
                          <button
                            *ngIf="!disableEndereco"
                            [disabled]="loadingRequest | async"
                            mat-mini-fab
                            color="primary"
                            (click)="setInfoEndereco()"
                          >
                            <mat-icon> done</mat-icon>
                          </button>
                          <button
                            mat-mini-fab
                            [color]="!disableEndereco ? 'warn' : 'primary'"
                            (click)="swtichStateEditEndereco()"
                          >
                            <mat-icon>{{
                              disableEndereco ? 'edit' : 'close'
                            }}</mat-icon>
                          </button>
                        </div>
                        <mat-progress-bar
                          *ngIf="loadingRequest | async"
                          mode="indeterminate"
                        ></mat-progress-bar>
                        <div class="chaTip">
                          <mat-form-field id="cha" class="form">
                            <mat-label>Chave Pix</mat-label>
                            <input
                              type="text"
                              matInput
                              formControlName="Chave"
                            />
                          </mat-form-field>
                          <mat-form-field id="tip" class="form">
                            <mat-label>Tipo de Pix</mat-label>
                            <input
                              type="text"
                              matInput
                              formControlName="Tipo"
                            />
                          </mat-form-field>
                        </div>
                      </form>
                    </div>
                  </div>
                </form>

                <span class="example-spacer"></span>
              </mat-expansion-panel>
              <mat-divider></mat-divider>

              <mat-expansion-panel
                (opened)="panelOpenState = true"
                (closed)="panelOpenState = false"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <mat-icon>monetization_on</mat-icon>
                  </mat-panel-title>

                  <h3>Informações sobre pagamentos</h3>
                  <span class="example-spacer"></span>
                </mat-expansion-panel-header>
                <p>Formas de pagamento e transações feitas na conta.</p>
              </mat-expansion-panel>
              <mat-divider></mat-divider>
            </mat-accordion>
          </div>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
